var wn=Object.defineProperty;var Pn=(e,t,n)=>t in e?wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _e=(e,t,n)=>Pn(e,typeof t!="symbol"?t+"":t,n);import{r as o,p as jt,u as be,a as In,b as oe,c as qe,E as me,d as Je,e as Qe,i as ge,g as kn,f as J,t as Me,h as Ft,k as At,l as Dt,m as ae,n as Ne,o as Ht,j as i,q as ie,s as et,v as Fe,w as On,x as Ae,y as Te,z as ye,A as Ye,B as Vt,C as Lt,D as Nn,F as Se,G as jn,H as We,I as Fn,J as ze,K as _t,L as An,M as Dn,N as Hn,R as Vn,O as Ln,P as _n,Q as Bn,T as mt,U as Kn,V as bt}from"./index-BG1q7iHG.js";import{i as je,F as Bt,P as tt,c as V,u as Pe,a as ve,b as Kt,d as xt,e as se,g as De,f as Zn,m as Un,h as we,j as $n,k as Yn,T as Wn,l as nt,n as Be,o as zn,p as Gn,q as Xn,r as Zt,s as Ut,t as $t,v as ot,R as Yt,w as He,C as ke,x as Wt,y as zt,z as Gt,I as Xt,A as qt,B as Jt,D as qn,E as Jn,G as Qn,H as eo,J as to,K as no,L as oo,M as Qt,N as en,O as ro,Q as so,S as ao,U as io,V as lo,W as Ge,X as co,Y as ht,Z as yt,_ as uo,$ as fo,a0 as po,a1 as go,a2 as mo,a3 as bo,a4 as xo,a5 as ho,a6 as yo,a7 as vo}from"./getPseudoElementBounds-2CMatPTG.js";const Eo=new Map([["bold",o.createElement(o.Fragment,null,o.createElement("path",{d:"M216,28H88A12,12,0,0,0,76,40V76H40A12,12,0,0,0,28,88V216a12,12,0,0,0,12,12H168a12,12,0,0,0,12-12V180h36a12,12,0,0,0,12-12V40A12,12,0,0,0,216,28ZM156,204H52V100H156Zm48-48H180V88a12,12,0,0,0-12-12H100V52H204Z"}))],["duotone",o.createElement(o.Fragment,null,o.createElement("path",{d:"M216,40V168H168V88H88V40Z",opacity:"0.2"}),o.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["fill",o.createElement(o.Fragment,null,o.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32Zm-8,128H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["light",o.createElement(o.Fragment,null,o.createElement("path",{d:"M216,34H88a6,6,0,0,0-6,6V82H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H168a6,6,0,0,0,6-6V174h42a6,6,0,0,0,6-6V40A6,6,0,0,0,216,34ZM162,210H46V94H162Zm48-48H174V88a6,6,0,0,0-6-6H94V46H210Z"}))],["regular",o.createElement(o.Fragment,null,o.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["thin",o.createElement(o.Fragment,null,o.createElement("path",{d:"M216,36H88a4,4,0,0,0-4,4V84H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H168a4,4,0,0,0,4-4V172h44a4,4,0,0,0,4-4V40A4,4,0,0,0,216,36ZM164,212H44V92H164Zm48-48H172V88a4,4,0,0,0-4-4H92V44H212Z"}))]]),Ro=new Map([["bold",o.createElement(o.Fragment,null,o.createElement("path",{d:"M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"}))],["duotone",o.createElement(o.Fragment,null,o.createElement("path",{d:"M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z",opacity:"0.2"}),o.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"}))],["fill",o.createElement(o.Fragment,null,o.createElement("path",{d:"M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"}))],["light",o.createElement(o.Fragment,null,o.createElement("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"}))],["regular",o.createElement(o.Fragment,null,o.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"}))],["thin",o.createElement(o.Fragment,null,o.createElement("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"}))]]),tn=o.forwardRef((e,t)=>o.createElement(jt,{ref:t,...e,weights:Eo}));tn.displayName="CopyIcon";const nn=o.forwardRef((e,t)=>o.createElement(jt,{ref:t,...e,weights:Ro}));nn.displayName="DotsThreeIcon";function Ke(e,t,n){if(n&&!je(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r==null?void 0:r[t]}return e==null?void 0:e[t]}function Co(e,t){const n=o.useRef(null),r=o.useRef(null);return o.useCallback(u=>{if(e!==void 0){if(n.current!==null){const a=n.current,g=r.current,l=t.context.triggerElements.getById(a);g&&l===g&&t.context.triggerElements.delete(a),n.current=null,r.current=null}u!==null&&(n.current=e,r.current=u,t.context.triggerElements.add(e,u))}},[t,e])}function To(e,t,n,r){const u=n.useState("isMountedByTrigger",e),a=Co(e,n),g=oe(l=>{if(a(l),!l||!n.select("open"))return;const s=n.select("activeTriggerId");if(s===e){n.update({activeTriggerElement:l,...r});return}s==null&&n.update({activeTriggerId:e,activeTriggerElement:l,...r})});return be(()=>{u&&n.update({activeTriggerElement:t.current,...r})},[u,n,t,...Object.values(r)]),{registerTrigger:g,isMountedByThisTrigger:u}}function on(e){const t=e.useState("open");be(()=>{if(t&&!e.select("activeTriggerId")&&e.context.triggerElements.size===1){const n=e.context.triggerElements.entries().next();if(!n.done){const[r,u]=n.value;e.update({activeTriggerId:r,activeTriggerElement:u})}}},[t,e])}function rn(e,t,n){const{mounted:r,setMounted:u,transitionStatus:a}=In(e);t.useSyncedValues({mounted:r,transitionStatus:a});const g=oe(()=>{var s,E;u(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n==null||n(),(E=(s=t.context).onOpenChangeComplete)==null||E.call(s,!1)}),l=t.useState("preventUnmountingOnClose");return qe({enabled:!l,open:e,ref:t.context.popupRef,onComplete(){e||g()}}),{forceUnmount:g,transitionStatus:a}}function So(){return new Bt({open:!1,floatingElement:null,referenceElement:null,triggerElements:new tt,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function sn(){return{open:!1,mounted:!1,transitionStatus:"idle",floatingRootContext:So(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,popupElement:null,positionerElement:null,activeTriggerProps:me,inactiveTriggerProps:me,popupProps:me}}const an={open:V(e=>e.open),mounted:V(e=>e.mounted),transitionStatus:V(e=>e.transitionStatus),floatingRootContext:V(e=>e.floatingRootContext),preventUnmountingOnClose:V(e=>e.preventUnmountingOnClose),payload:V(e=>e.payload),activeTriggerId:V(e=>e.activeTriggerId),activeTriggerElement:V(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:V((e,t)=>t!==void 0&&e.activeTriggerId===t),isOpenedByTrigger:V((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.open),isMountedByTrigger:V((e,t)=>t!==void 0&&e.activeTriggerId===t&&e.mounted),triggerProps:V((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:V(e=>e.popupProps),popupElement:V(e=>e.popupElement),positionerElement:V(e=>e.positionerElement)};function ln(e){const{popupStore:t,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:u}=e,a=Je(),g=Pe()!=null,l=t.useState("open"),s=t.useState("activeTriggerElement"),E=t.useState(r?"popupElement":"positionerElement"),v=t.context.triggerElements,d=Qe(()=>new Bt({open:l,referenceElement:s,floatingElement:E,triggerElements:v,onOpenChange:u,floatingId:a,nested:g,noEmit:n})).current;return be(()=>{const x={open:l,floatingId:a,referenceElement:s,floatingElement:E};ge(s)&&(x.domReferenceElement=s),d.state.positionReference===d.state.referenceElement&&(x.positionReference=s),d.update(x)},[l,a,s,E,d]),d.context.onOpenChange=u,d.context.nested=g,d.context.noEmit=n,d}const Ze=$n&&Yn;function Mo(e,t={}){const n="rootStore"in e?e.rootStore:e,{events:r,dataRef:u}=n.context,{enabled:a=!0,visibleOnly:g=!0,delay:l}=t,s=o.useRef(!1),E=o.useRef(null),v=ve(),d=o.useRef(!0);o.useEffect(()=>{const f=n.select("domReferenceElement");if(!a)return;const h=kn(f);function m(){const b=n.select("domReferenceElement");!n.select("open")&&Ft(b)&&b===xt(we(b))&&(s.current=!0)}function T(){d.current=!0}function R(){d.current=!1}return h.addEventListener("blur",m),Ze&&(h.addEventListener("keydown",T,!0),h.addEventListener("pointerdown",R,!0)),()=>{h.removeEventListener("blur",m),Ze&&(h.removeEventListener("keydown",T,!0),h.removeEventListener("pointerdown",R,!0))}},[n,a]),o.useEffect(()=>{if(!a)return;function f(h){if(h.reason===At||h.reason===Dt){const m=n.select("domReferenceElement");ge(m)&&(E.current=m,s.current=!0)}}return r.on("openchange",f),()=>{r.off("openchange",f)}},[r,a,n]);const x=o.useMemo(()=>({onMouseLeave(){s.current=!1,E.current=null},onFocus(f){const h=f.currentTarget;if(s.current){if(E.current===h)return;s.current=!1,E.current=null}const m=De(f.nativeEvent);if(g&&ge(m)){if(Ze&&!f.relatedTarget){if(!d.current&&!Zn(m))return}else if(!Un(m))return}const T=f.relatedTarget&&n.context.triggerElements.hasElement(f.relatedTarget),{nativeEvent:R,currentTarget:b}=f,C=typeof l=="function"?l():l;if(n.select("open")&&T||C===0||C===void 0){n.setOpen(!0,J(Me,R,b));return}v.start(C,()=>{s.current||n.setOpen(!0,J(Me,R,b))})},onBlur(f){s.current=!1,E.current=null;const h=f.relatedTarget,m=f.nativeEvent,T=ge(h)&&h.hasAttribute(Kt("focus-guard"))&&h.getAttribute("data-type")==="outside";v.start(0,()=>{var D;const R=n.select("domReferenceElement"),b=xt(R?R.ownerDocument:document);if(!h&&b===R||se((D=u.current.floatingContext)==null?void 0:D.refs.floating.current,b)||se(R,b)||T)return;const C=h??b;if(ge(C)){const c=n.context.triggerElements;if(c.hasElement(C)||c.hasMatchingElement(K=>se(K,C)))return}n.setOpen(!1,J(Me,m))})}}),[u,n,g,v,l]);return o.useMemo(()=>a?{reference:x,trigger:x}:{},[a,x])}const Xe=Kt("safe-polygon"),wo=`button,a,[role="button"],select,[tabindex]:not([tabindex="-1"]),${Wn}`;function Po(e){return e?!!e.closest(wo):!1}function cn(e){const t=o.useRef(void 0),n=o.useRef(!1),r=o.useRef(void 0),u=o.useRef(!0),a=o.useRef(!1),g=o.useRef(()=>{}),l=o.useRef(!1),s=ve(),E=ve(),v=o.useRef(void 0);return o.useMemo(()=>{const d=e.context.dataRef.current;return d.hoverInteractionState||(d.hoverInteractionState={pointerTypeRef:t,interactedInsideRef:n,handlerRef:r,blockMouseMoveRef:u,performedPointerEventsMutationRef:a,unbindMouseMoveRef:g,restTimeoutPendingRef:l,openChangeTimeout:s,restTimeout:E,handleCloseOptionsRef:v}),d.hoverInteractionState},[e,t,n,r,u,a,g,l,s,E,v])}const Io=new Set(["click","mousedown"]);function ko(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),u=n.useState("floatingElement"),a=n.useState("domReferenceElement"),{dataRef:g}=n.context,{enabled:l=!0,closeDelay:s=0,externalTree:E}=t,{pointerTypeRef:v,interactedInsideRef:d,handlerRef:x,performedPointerEventsMutationRef:f,unbindMouseMoveRef:h,restTimeoutPendingRef:m,openChangeTimeout:T,handleCloseOptionsRef:R}=cn(n),b=nt(E),C=Pe(),D=oe(()=>d.current?!0:g.current.openEvent?Io.has(g.current.openEvent.type):!1),c=oe(()=>{var O;const k=(O=g.current.openEvent)==null?void 0:O.type;return(k==null?void 0:k.includes("mouse"))&&k!=="mousedown"}),K=o.useCallback((k,O=!0)=>{const S=Oo(s,v.current);S&&!x.current?T.start(S,()=>n.setOpen(!1,J(ae,k))):O&&(T.clear(),n.setOpen(!1,J(ae,k)))},[s,x,n,v,T]),N=oe(()=>{h.current(),x.current=void 0}),Z=oe(()=>{if(f.current){const k=we(u).body;k.style.pointerEvents="",k.removeAttribute(Xe),f.current=!1}}),I=oe(k=>{const O=De(k);if(!Po(O)){d.current=!1;return}d.current=!0});be(()=>{r||(v.current=void 0,m.current=!1,d.current=!1,N(),Z())},[r,v,m,d,N,Z]),o.useEffect(()=>()=>{N()},[N]),o.useEffect(()=>Z,[Z]),be(()=>{var k,O,S;if(l&&r&&(k=R.current)!=null&&k.blockPointerEvents&&c()&&ge(a)&&u){f.current=!0;const p=we(u).body;p.setAttribute(Xe,"");const L=a,H=u,_=(S=(O=b==null?void 0:b.nodesRef.current.find(Q=>Q.id===C))==null?void 0:O.context)==null?void 0:S.elements.floating;return _&&(_.style.pointerEvents=""),p.style.pointerEvents="none",L.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{p.style.pointerEvents="",L.style.pointerEvents="",H.style.pointerEvents=""}}},[l,r,a,u,R,c,b,C,f]),o.useEffect(()=>{if(!l)return;function k(L){if(D()||!g.current.floatingContext||!n.select("open"))return;const H=n.context.triggerElements;L.relatedTarget&&H.hasElement(L.relatedTarget)||(Z(),N(),D()||K(L))}function O(L){var H;T.clear(),Z(),(H=x.current)==null||H.call(x,L),N()}function S(L){D()||K(L,!1)}const p=u;return p&&(p.addEventListener("mouseleave",k),p.addEventListener("mouseenter",O),p.addEventListener("mouseleave",S),p.addEventListener("pointerdown",I,!0)),()=>{p&&(p.removeEventListener("mouseleave",k),p.removeEventListener("mouseenter",O),p.removeEventListener("mouseleave",S),p.removeEventListener("pointerdown",I,!0))}})}function Oo(e,t){return t&&!je(t)?0:typeof e=="function"?e():e}function Ue(e){return typeof e=="function"?e():e}const No={current:null};function jo(e,t={}){var Q;const n="rootStore"in e?e.rootStore:e,{dataRef:r,events:u}=n.context,{enabled:a=!0,delay:g=0,handleClose:l=null,mouseOnly:s=!1,restMs:E=0,move:v=!0,triggerElementRef:d=No,externalTree:x,isActiveTrigger:f=!0}=t,h=nt(x),{pointerTypeRef:m,interactedInsideRef:T,handlerRef:R,blockMouseMoveRef:b,performedPointerEventsMutationRef:C,unbindMouseMoveRef:D,restTimeoutPendingRef:c,openChangeTimeout:K,restTimeout:N,handleCloseOptionsRef:Z}=cn(n),I=Be(l),k=Be(g),O=Be(E);f&&(Z.current=(Q=I.current)==null?void 0:Q.__options);const S=oe(()=>T.current?!0:r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1),p=o.useCallback((w,y=!0)=>{const P=Ke(k.current,"close",m.current);P&&!R.current?K.start(P,()=>n.setOpen(!1,J(ae,w))):y&&(K.clear(),n.setOpen(!1,J(ae,w)))},[k,R,n,m,K]),L=oe(()=>{D.current(),R.current=void 0}),H=oe(()=>{if(C.current){const w=we(n.select("domReferenceElement")).body;w.style.pointerEvents="",w.removeAttribute(Xe),C.current=!1}});o.useEffect(()=>{if(!a)return;function w(y){y.open||(K.clear(),N.clear(),b.current=!0,c.current=!1)}return u.on("openchange",w),()=>{u.off("openchange",w)}},[a,u,K,N,b,c]);const _=oe(w=>{var j;if(S()||!r.current.floatingContext)return;const y=n.context.triggerElements;if(w.relatedTarget&&y.hasElement(w.relatedTarget))return;const P=d.current;(j=I.current)==null||j.call(I,{...r.current.floatingContext,tree:h,x:w.clientX,y:w.clientY,onClose(){H(),L(),!S()&&P===n.select("domReferenceElement")&&p(w)}})(w)});return o.useEffect(()=>{if(!a)return;const w=d.current??(f?n.select("domReferenceElement"):null);if(!ge(w))return;function y(M){if(K.clear(),b.current=!1,s&&!je(m.current)||Ue(O.current)>0&&!Ke(k.current,"open"))return;const F=Ke(k.current,"open",m.current),$=n.select("domReferenceElement"),Y=n.context.triggerElements,A=(Y.hasElement(M.target)||Y.hasMatchingElement(ee=>se(ee,M.target)))&&(!$||!se($,M.target)),B=M.currentTarget??null,z=n.select("open"),G=!z||A;A&&z?n.setOpen(!0,J(ae,M,B)):F?K.start(F,()=>{G&&n.setOpen(!0,J(ae,M,B))}):G&&n.setOpen(!0,J(ae,M,B))}function P(M){if(S()){H();return}D.current();const F=n.select("domReferenceElement"),$=we(F);N.clear(),c.current=!1;const Y=n.context.triggerElements;if(M.relatedTarget&&Y.hasElement(M.relatedTarget))return;if(I.current&&r.current.floatingContext){n.select("open")||K.clear();const B=d.current;R.current=I.current({...r.current.floatingContext,tree:h,x:M.clientX,y:M.clientY,onClose(){H(),L(),!S()&&B===n.select("domReferenceElement")&&p(M,!0)}});const z=R.current;z(M),$.addEventListener("mousemove",z),D.current=()=>{$.removeEventListener("mousemove",z)};return}(m.current==="touch"?!se(n.select("floatingElement"),M.relatedTarget):!0)&&p(M)}function j(M){_(M)}return n.select("open")&&w.addEventListener("mouseleave",j),v&&w.addEventListener("mousemove",y,{once:!0}),w.addEventListener("mouseenter",y),w.addEventListener("mouseleave",P),()=>{w.removeEventListener("mouseleave",j),v&&w.removeEventListener("mousemove",y),w.removeEventListener("mouseenter",y),w.removeEventListener("mouseleave",P)}},[L,H,b,r,k,p,n,a,I,_,f,S,s,v,m,O,N,c,K,d,h,D,R]),o.useMemo(()=>{function w(y){m.current=y.pointerType}return{onPointerDown:w,onPointerEnter:w,onMouseMove(y){const{nativeEvent:P}=y,j=y.currentTarget,M=n.select("domReferenceElement"),F=n.context.triggerElements,$=n.select("open"),Y=(F.hasElement(y.target)||F.hasMatchingElement(B=>se(B,y.target)))&&(!M||!se(M,y.target));if(s&&!je(m.current)||$&&!Y||Ue(O.current)===0||!Y&&c.current&&y.movementX**2+y.movementY**2<2)return;N.clear();function A(){if(c.current=!1,S())return;const B=n.select("open");!b.current&&(!B||Y)&&n.setOpen(!0,J(ae,P,j))}m.current==="touch"?Ne.flushSync(()=>{A()}):Y&&$?A():(c.current=!0,N.start(Ue(O.current),A))}}},[b,S,s,n,m,O,N,c])}const Fo=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function un(e,t={}){const n="rootStore"in e?e.rootStore:e,r=n.useState("open"),u=n.useState("floatingId"),a=n.useState("domReferenceElement"),g=n.useState("floatingElement"),{enabled:l=!0,role:s="dialog"}=t,E=Je(),v=(a==null?void 0:a.id)||E,d=o.useMemo(()=>{var C;return((C=zn(g))==null?void 0:C.id)||u},[g,u]),x=Fo.get(s)??s,h=Pe()!=null,m=o.useMemo(()=>x==="tooltip"||s==="label"?me:{"aria-haspopup":x==="alertdialog"?"dialog":x,"aria-expanded":"false",...x==="listbox"&&{role:"combobox"},...x==="menu"&&h&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[x,h,s]),T=o.useMemo(()=>x==="tooltip"||s==="label"?{[`aria-${s==="label"?"labelledby":"describedby"}`]:r?d:void 0}:{...m,"aria-expanded":r?"true":"false","aria-controls":r?d:void 0,...x==="menu"&&{id:v}},[x,d,r,v,s,m]),R=o.useMemo(()=>{const C={id:d,...x&&{role:x}};return x==="tooltip"||s==="label"?C:{...C,...x==="menu"&&{"aria-labelledby":v}}},[x,d,v,s]),b=o.useCallback(({active:C,selected:D})=>{const c={role:"option",...C&&{id:`${d}-fui-option`}};switch(s){case"select":case"combobox":return{...c,"aria-selected":D}}return{}},[d,s]);return o.useMemo(()=>l?{reference:T,floating:R,item:b,trigger:m}:{},[l,T,R,m,b])}function vt(e,t){const[n,r]=e;let u=!1;const a=t.length;for(let g=0,l=a-1;g<a;l=g++){const[s,E]=t[g]||[0,0],[v,d]=t[l]||[0,0];E>=r!=d>=r&&n<=(v-s)*(r-E)/(d-E)+s&&(u=!u)}return u}function Ao(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Do(e={}){const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e,u=new Gn;let a=!1,g=null,l=null,s=typeof performance<"u"?performance.now():0;function E(d,x){const f=performance.now(),h=f-s;if(g===null||l===null||h===0)return g=d,l=x,s=f,null;const m=d-g,T=x-l,b=Math.sqrt(m*m+T*T)/h;return g=d,l=x,s=f,b}const v=({x:d,y:x,placement:f,elements:h,onClose:m,nodeId:T,tree:R})=>function(C){function D(){u.clear(),m()}if(u.clear(),!h.domReference||!h.floating||f==null||d==null||x==null)return;const{clientX:c,clientY:K}=C,N=[c,K],Z=De(C),I=C.type==="mouseleave",k=se(h.floating,Z),O=se(h.domReference,Z),S=h.domReference.getBoundingClientRect(),p=h.floating.getBoundingClientRect(),L=f.split("-")[0],H=d>p.right-p.width/2,_=x>p.bottom-p.height/2,Q=Ao(N,S),w=p.width>S.width,y=p.height>S.height,P=(w?S:p).left,j=(w?S:p).right,M=(y?S:p).top,F=(y?S:p).bottom;if(k&&(a=!0,!I))return;if(O&&(a=!1),O&&!I){a=!0;return}if(I&&ge(C.relatedTarget)&&se(h.floating,C.relatedTarget)||R&&Xn(R.nodesRef.current,T).some(({context:A})=>A==null?void 0:A.open))return;if(L==="top"&&x>=S.bottom-1||L==="bottom"&&x<=S.top+1||L==="left"&&d>=S.right-1||L==="right"&&d<=S.left+1)return D();let $=[];switch(L){case"top":$=[[P,S.top+1],[P,p.bottom-1],[j,p.bottom-1],[j,S.top+1]];break;case"bottom":$=[[P,p.top+1],[P,S.bottom-1],[j,S.bottom-1],[j,p.top+1]];break;case"left":$=[[p.right-1,F],[p.right-1,M],[S.left+1,M],[S.left+1,F]];break;case"right":$=[[S.right-1,F],[S.right-1,M],[p.left+1,M],[p.left+1,F]];break}function Y([A,B]){switch(L){case"top":{const z=[w?A+t/2:H?A+t*4:A-t*4,B+t+1],G=[w?A-t/2:H?A+t*4:A-t*4,B+t+1],ee=[[p.left,H||w?p.bottom-t:p.top],[p.right,H?w?p.bottom-t:p.top:p.bottom-t]];return[z,G,...ee]}case"bottom":{const z=[w?A+t/2:H?A+t*4:A-t*4,B-t],G=[w?A-t/2:H?A+t*4:A-t*4,B-t],ee=[[p.left,H||w?p.top+t:p.bottom],[p.right,H?w?p.top+t:p.bottom:p.top+t]];return[z,G,...ee]}case"left":{const z=[A+t+1,y?B+t/2:_?B+t*4:B-t*4],G=[A+t+1,y?B-t/2:_?B+t*4:B-t*4];return[...[[_||y?p.right-t:p.left,p.top],[_?y?p.right-t:p.left:p.right-t,p.bottom]],z,G]}case"right":{const z=[A-t,y?B+t/2:_?B+t*4:B-t*4],G=[A-t,y?B-t/2:_?B+t*4:B-t*4],ee=[[_||y?p.left+t:p.right,p.top],[_?y?p.left+t:p.right:p.left+t,p.bottom]];return[z,G,...ee]}default:return[]}}if(!vt([c,K],$)){if(a&&!Q)return D();if(!I&&r){const A=E(C.clientX,C.clientY);if(A!==null&&A<.1)return D()}vt([c,K],Y([d,x]))?!a&&r&&u.start(40,D):D()}};return v.__options={blockPointerEvents:n},v}function Ho(e){const{store:t,parentContext:n,actionsRef:r}=e,u=t.useState("open"),a=t.useState("disablePointerDismissal"),g=t.useState("modal"),l=t.useState("popupElement"),{openMethod:s,triggerProps:E,reset:v}=Zt(u);on(t);const{forceUnmount:d}=rn(u,t,()=>{v()}),x=oe(k=>{const O=J(k);return O.preventUnmountOnClose=()=>{t.set("preventUnmountingOnClose",!0)},O}),f=o.useCallback(()=>{t.setOpen(!1,x(Ht))},[t,x]);o.useImperativeHandle(r,()=>({unmount:d,close:f}),[d,f]);const h=ln({popupStore:t,onOpenChange:t.setOpen,treatPopupAsFloatingElement:!0,noEmit:!0}),[m,T]=o.useState(0),R=m===0,b=un(h),C=Ut(h,{outsidePressEvent(){return t.context.internalBackdropRef.current||t.context.backdropRef.current?"intentional":{mouse:g==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}},outsidePress(k){if("button"in k&&k.button!==0||"touches"in k&&k.touches.length!==1)return!1;const O=De(k);if(R&&!a){const S=O;return g&&(t.context.internalBackdropRef.current||t.context.backdropRef.current)?t.context.internalBackdropRef.current===S||t.context.backdropRef.current===S||se(S,l)&&!(S!=null&&S.hasAttribute("data-base-ui-portal")):!0}return!1},escapeKey:R});$t(u&&g===!0,l);const{getReferenceProps:D,getFloatingProps:c,getTriggerProps:K}=ot([b,C]);t.useContextCallback("onNestedDialogOpen",k=>{T(k+1)}),t.useContextCallback("onNestedDialogClose",()=>{T(0)}),o.useEffect(()=>(n!=null&&n.onNestedDialogOpen&&u&&n.onNestedDialogOpen(m),n!=null&&n.onNestedDialogClose&&!u&&n.onNestedDialogClose(),()=>{n!=null&&n.onNestedDialogClose&&u&&n.onNestedDialogClose()}),[u,n,m]);const N=o.useMemo(()=>D(E),[D,E]),Z=o.useMemo(()=>K(E),[K,E]),I=o.useMemo(()=>c(),[c]);t.useSyncedValues({openMethod:s,activeTriggerProps:N,inactiveTriggerProps:Z,popupProps:I,floatingRootContext:h,nestedOpenDialogCount:m})}const dn=o.createContext(void 0);function Ee(e){return o.useContext(dn)}const Vo={...an,modal:V(e=>e.modal),nested:V(e=>e.nested),nestedOpenDialogCount:V(e=>e.nestedOpenDialogCount),disablePointerDismissal:V(e=>e.disablePointerDismissal),openMethod:V(e=>e.openMethod),descriptionElementId:V(e=>e.descriptionElementId),titleElementId:V(e=>e.titleElementId),viewportElement:V(e=>e.viewportElement),role:V(e=>e.role)};class Lo extends Yt{constructor(n){super(_o(n),{popupRef:o.createRef(),backdropRef:o.createRef(),internalBackdropRef:o.createRef(),triggerElements:new tt,onOpenChange:void 0,onOpenChangeComplete:void 0},Vo);_e(this,"setOpen",(n,r)=>{var l,s,E,v;if(r.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},!n&&r.trigger==null&&this.state.activeTriggerId!=null&&(r.trigger=this.state.activeTriggerElement??void 0),(s=(l=this.context).onOpenChange)==null||s.call(l,n,r),r.isCanceled)return;const u={open:n,nativeEvent:r.event,reason:r.reason,nested:this.state.nested};(E=this.state.floatingRootContext.context.events)==null||E.emit("openchange",u);const a={open:n},g=((v=r.trigger)==null?void 0:v.id)??null;(g||n)&&(a.activeTriggerId=g,a.activeTriggerElement=r.trigger??null),this.update(a)})}}function _o(e={}){return{...sn(),modal:!0,disablePointerDismissal:!1,popupElement:null,viewportElement:null,descriptionElementId:void 0,titleElementId:void 0,openMethod:null,nested:!1,nestedOpenDialogCount:0,role:"dialog",...e}}function Et(e){const{children:t,open:n,defaultOpen:r=!1,onOpenChange:u,onOpenChangeComplete:a,actionsRef:g,handle:l,triggerId:s,defaultTriggerId:E=null}=e,v=Ee(),d=!!v,x=Qe(()=>(l==null?void 0:l.store)??new Lo({open:n??r,activeTriggerId:s!==void 0?s:E,modal:!0,disablePointerDismissal:!0,nested:d,role:"alertdialog"})).current;x.useControlledProp("open",n,r),x.useControlledProp("activeTriggerId",s,E),x.useSyncedValue("nested",d),x.useContextCallback("onOpenChange",u),x.useContextCallback("onOpenChangeComplete",a);const f=x.useState("payload");Ho({store:x,actionsRef:g,parentContext:v==null?void 0:v.store.context});const h=o.useMemo(()=>({store:x}),[x]);return i.jsx(dn.Provider,{value:h,children:typeof t=="function"?t({payload:f}):t})}const Bo={...He,...et},Rt=o.forwardRef(function(t,n){const{render:r,className:u,forceRender:a=!1,...g}=t,{store:l}=Ee(),s=l.useState("open"),E=l.useState("nested"),v=l.useState("mounted"),d=l.useState("transitionStatus"),x=o.useMemo(()=>({open:s,transitionStatus:d}),[s,d]);return ie("div",t,{state:x,ref:[l.context.backdropRef,n],stateAttributesMapping:Bo,props:[{role:"presentation",hidden:!v,style:{userSelect:"none",WebkitUserSelect:"none"}},g],enabled:a||!E})}),Ct=o.forwardRef(function(t,n){const{render:r,className:u,disabled:a=!1,nativeButton:g=!0,...l}=t,{store:s}=Ee(),E=s.useState("open");function v(h){E&&s.setOpen(!1,J(On,h.nativeEvent))}const{getButtonProps:d,buttonRef:x}=Fe({disabled:a,native:g}),f=o.useMemo(()=>({disabled:a}),[a]);return ie("button",t,{state:f,ref:[n,x],props:[{onClick:v},l,d]})}),Tt=o.forwardRef(function(t,n){const{render:r,className:u,id:a,...g}=t,{store:l}=Ee(),s=Ae(a);return l.useSyncedValueWithCleanup("descriptionElementId",s),ie("p",t,{ref:n,props:[{id:s},g]})});let Ko=function(e){return e.nestedDialogs="--nested-dialogs",e}({}),Zo=function(e){return e[e.open=ke.open]="open",e[e.closed=ke.closed]="closed",e[e.startingStyle=ke.startingStyle]="startingStyle",e[e.endingStyle=ke.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({});const fn=o.createContext(void 0);function Uo(){const e=o.useContext(fn);if(e===void 0)throw new Error(Te(26));return e}const $o={...He,...et,nestedDialogOpen(e){return e?{[Zo.nestedDialogOpen]:""}:null}},St=o.forwardRef(function(t,n){const{className:r,finalFocus:u,initialFocus:a,render:g,...l}=t,{store:s}=Ee(),E=s.useState("descriptionElementId"),v=s.useState("disablePointerDismissal"),d=s.useState("floatingRootContext"),x=s.useState("popupProps"),f=s.useState("modal"),h=s.useState("mounted"),m=s.useState("nested"),T=s.useState("nestedOpenDialogCount"),R=s.useState("open"),b=s.useState("openMethod"),C=s.useState("titleElementId"),D=s.useState("transitionStatus"),c=s.useState("role");Uo(),qe({open:R,ref:s.context.popupRef,onComplete(){var O,S;R&&((S=(O=s.context).onOpenChangeComplete)==null||S.call(O,!0))}});function K(O){return O==="touch"?s.context.popupRef.current:!0}const N=a===void 0?K:a,Z=T>0,I=o.useMemo(()=>({open:R,nested:m,transitionStatus:D,nestedDialogOpen:Z}),[R,m,D,Z]),k=ie("div",t,{state:I,props:[x,{"aria-labelledby":C??void 0,"aria-describedby":E??void 0,role:c,tabIndex:-1,hidden:!h,onKeyDown(O){Wt.has(O.key)&&O.stopPropagation()},style:{[Ko.nestedDialogs]:T}},l],ref:[n,s.context.popupRef,s.useStateSetter("popupElement")],stateAttributesMapping:$o});return i.jsx(zt,{context:d,openInteractionType:b,disabled:!h,closeOnFocusOut:!v,initialFocus:N,returnFocus:u,modal:f!==!1,restoreFocus:"popup",children:k})}),Mt=o.forwardRef(function(t,n){const{keepMounted:r=!1,...u}=t,{store:a}=Ee(),g=a.useState("mounted"),l=a.useState("modal"),s=a.useState("open");return g||r?i.jsx(fn.Provider,{value:r,children:i.jsxs(Gt,{ref:n,...u,children:[g&&l===!0&&i.jsx(Xt,{ref:a.context.internalBackdropRef,inert:qt(!s)}),t.children]})}):null}),wt=o.forwardRef(function(t,n){const{render:r,className:u,id:a,...g}=t,{store:l}=Ee(),s=Ae(a);return l.useSyncedValueWithCleanup("titleElementId",s),ie("h2",t,{ref:n,props:[{id:s},g]})}),ce=o.forwardRef(function(t,n){const{render:r,className:u,disabled:a=!1,focusableWhenDisabled:g=!1,nativeButton:l=!0,...s}=t,{getButtonProps:E,buttonRef:v}=Fe({disabled:a,focusableWhenDisabled:g,native:l}),d=o.useMemo(()=>({disabled:a}),[a]);return ie("button",t,{state:d,ref:[n,v],props:[s,E]})}),Pt=512;function Ce(e){if(!e.trim())return"Key is required";const t=new TextEncoder().encode(e).length;return t>Pt?`Key must be ${Pt} bytes or less (currently ${t} bytes)`:null}function Yo({onAdd:e,clearSignal:t=0}){const[n,r]=o.useState(""),[u,a]=o.useState(""),[g,l]=o.useState(!1),[s,E]=o.useState(null);o.useEffect(()=>{t>0&&(r(""),a(""),E(null))},[t]);const v=f=>{const h=f.target.value;r(h),E(h.trim()?Ce(h):null)},d=async f=>{f.preventDefault();const h=Ce(n);if(h){E(h);return}try{l(!0),await e(n,u)&&(r(""),a(""),E(null))}finally{l(!1)}},x=!!Ce(n);return i.jsxs("form",{className:"flex flex-col lg:flex-row gap-2 mb-4 items-start",onSubmit:d,children:[i.jsxs("div",{className:"flex flex-col w-full lg:w-2xs shrink-0",children:[i.jsx("label",{className:"sr-only",htmlFor:"add-key",children:"Key"}),i.jsx("input",{id:"add-key",className:ye("w-full font-mono bg-bg text-text placeholder:text-text! py-2 px-3 text-sm border border-border rounded-md focus:outline-none focus:border-primary focus:shadow-focus-primary disabled:bg-bg-secondary disabled:text-text-secondary",{"border-danger focus:shadow-focus-danger":s}),placeholder:"Key",value:n,onChange:v,disabled:g}),s&&i.jsx("span",{className:"text-danger text-xs mt-1",children:s})]}),i.jsxs("div",{className:"flex flex-col flex-1 w-full lg:min-w-2xs",children:[i.jsx("label",{className:"sr-only",htmlFor:"add-value",children:"Value"}),i.jsx("textarea",{id:"add-value",className:"w-full font-mono bg-bg text-text placeholder:text-text! py-2 px-3 text-sm border border-border rounded-md focus:outline-none focus:border-primary focus:shadow-focus-primary disabled:bg-bg-secondary disabled:text-text-secondary max-h-2xs resize-none overflow-y-auto lg:[field-sizing:content]",placeholder:"Value",value:u,onChange:f=>a(f.target.value),disabled:g})]}),i.jsx(ce,{type:"submit",className:"shrink-0 w-full lg:w-auto inline-flex items-center justify-center py-2 px-4 text-sm font-medium border-none rounded-md cursor-pointer transition-[background-color,color,transform] active:translate-y-px bg-primary text-white hover:bg-primary-hover focus:outline-none focus:border-primary focus:shadow-focus-primary data-[disabled]:bg-primary/50 data-[disabled]:text-white/70 data-[disabled]:cursor-not-allowed data-[disabled]:active:translate-y-0",disabled:g||x,focusableWhenDisabled:!0,children:g?"Adding...":"Add entry"})]})}const pn=o.createContext(void 0);function gn(e){const t=o.useContext(pn);if(t===void 0&&!e)throw new Error(Te(33));return t}const mn=o.createContext(void 0);function Re(e){const t=o.useContext(mn);if(t===void 0&&!e)throw new Error(Te(36));return t}const Wo=o.createContext(void 0);function Ve(e=!0){const t=o.useContext(Wo);if(t===void 0&&!e)throw new Error(Te(25));return t}const zo={type:"regular-item"};function Go(e){const{closeOnClick:t,disabled:n=!1,highlighted:r,id:u,store:a,nativeButton:g,itemMetadata:l,nodeId:s}=e,E=o.useRef(null),v=Ve(!0),d=v!==void 0,{events:x}=a.useState("floatingTreeRoot"),{getButtonProps:f,buttonRef:h}=Fe({disabled:n,focusableWhenDisabled:!0,native:g}),m=o.useCallback(R=>Ye({id:u,role:"menuitem",tabIndex:r?0:-1,onMouseMove(b){s&&x.emit("itemhover",{nodeId:s,target:b.currentTarget})},onMouseEnter(){l.type==="submenu-trigger"&&l.setActive()},onKeyUp(b){b.key===" "&&a.context.typingRef.current&&b.preventBaseUIHandler()},onClick(b){t&&x.emit("close",{domEvent:b,reason:Lt})},onMouseUp(b){if(v){const C=v.initialCursorPointRef.current;if(v.initialCursorPointRef.current=null,d&&C&&Math.abs(b.clientX-C.x)<=1&&Math.abs(b.clientY-C.y)<=1)return}E.current&&a.context.allowMouseUpTriggerRef.current&&(!d||b.button===2)&&l.type==="regular-item"&&E.current.click()}},R,f),[u,r,f,t,x,a,d,v,l,s]),T=Vt(E,h);return o.useMemo(()=>({getItemProps:m,itemRef:T}),[m,T])}const It=o.forwardRef(function(t,n){const{render:r,className:u,id:a,label:g,nativeButton:l=!1,disabled:s=!1,closeOnClick:E=!0,...v}=t,d=Jt({label:g}),x=gn(!0),f=Ae(a),{store:h}=Re(),m=h.useState("isActive",d.index),T=h.useState("itemProps"),{getItemProps:R,itemRef:b}=Go({closeOnClick:E,disabled:s,highlighted:m,id:f,store:h,nativeButton:l,nodeId:x==null?void 0:x.nodeId,itemMetadata:zo}),C=o.useMemo(()=>({disabled:s,highlighted:m}),[s,m]);return ie("div",t,{state:C,props:[T,v,R],ref:[b,n,d.ref]})}),Xo={...He,...et},qo=o.forwardRef(function(t,n){const{render:r,className:u,finalFocus:a,...g}=t,{store:l}=Re(),{side:s,align:E}=gn(),v=qn()!=null,d=l.useState("open"),x=l.useState("transitionStatus"),f=l.useState("popupProps"),h=l.useState("mounted"),m=l.useState("instantType"),T=l.useState("activeTriggerElement"),R=l.useState("parent"),b=l.useState("lastOpenChangeReason"),C=l.useState("rootId"),D=l.useState("floatingRootContext"),c=l.useState("floatingTreeRoot"),K=l.useState("closeDelay"),N=l.useState("activeTriggerElement"),Z=R.type==="context-menu";qe({open:d,ref:l.context.popupRef,onComplete(){var L,H;d&&((H=(L=l.context).onOpenChangeComplete)==null||H.call(L,!0))}}),o.useEffect(()=>{function L(H){l.setOpen(!1,J(H.reason,H.domEvent))}return c.events.on("close",L),()=>{c.events.off("close",L)}},[c.events,l]);const I=l.useState("hoverEnabled"),k=l.useState("disabled");ko(D,{enabled:I&&!k&&!Z&&R.type!=="menubar",closeDelay:K});const O=o.useMemo(()=>({transitionStatus:x,side:s,align:E,open:d,nested:R.type==="menu",instant:m}),[x,s,E,d,R.type,m]),S=ie("div",t,{state:O,ref:[n,l.context.popupRef],stateAttributesMapping:Xo,props:[f,{onKeyDown(L){v&&Wt.has(L.key)&&L.stopPropagation()}},Jn(x),g,{"data-rootownerid":C}]});let p=R.type===void 0||Z;return(T||R.type==="menubar"&&b!==Nn)&&(p=!0),i.jsx(zt,{context:D,modal:Z,disabled:!h,returnFocus:a===void 0?p:a,initialFocus:R.type!=="menu",restoreFocus:!0,externalTree:R.type!=="menubar"?c:void 0,previousFocusableElement:N,nextFocusableElement:R.type===void 0?l.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:R.type===void 0?l.context.beforeContentFocusGuardRef:void 0,children:S})}),bn=o.createContext(void 0);function Jo(){const e=o.useContext(bn);if(e===void 0)throw new Error(Te(32));return e}const Qo=o.forwardRef(function(t,n){const{keepMounted:r=!1,...u}=t,{store:a}=Re();return a.useState("mounted")||r?i.jsx(bn.Provider,{value:r,children:i.jsx(Gt,{ref:n,...u})}):null}),er=o.forwardRef(function(t,n){var ee;const{anchor:r,positionMethod:u="absolute",className:a,render:g,side:l,align:s,sideOffset:E=0,alignOffset:v=0,collisionBoundary:d="clipping-ancestors",collisionPadding:x=5,arrowPadding:f=5,sticky:h=!1,disableAnchorTracking:m=!1,collisionAvoidance:T=Qn,...R}=t,{store:b}=Re(),C=Jo(),D=Ve(!0),c=b.useState("parent"),K=b.useState("floatingRootContext"),N=b.useState("floatingTreeRoot"),Z=b.useState("mounted"),I=b.useState("open"),k=b.useState("modal"),O=b.useState("activeTriggerElement"),S=b.useState("lastOpenChangeReason"),p=b.useState("floatingNodeId"),L=b.useState("floatingParentNodeId");let H=r,_=E,Q=v,w=s,y=T;c.type==="context-menu"&&(H=r??((ee=c.context)==null?void 0:ee.anchor),w=w??"start",!l&&w!=="center"&&(Q=t.alignOffset??2,_=t.sideOffset??-5));let P=l,j=w;c.type==="menu"?(P=P??"inline-end",j=j??"start",y=t.collisionAvoidance??eo):c.type==="menubar"&&(P=P??"bottom",j=j??"start");const M=c.type==="context-menu",F=to({anchor:H,floatingRootContext:K,positionMethod:D?"fixed":u,mounted:Z,side:P,sideOffset:_,align:j,alignOffset:Q,arrowPadding:M?0:f,collisionBoundary:d,collisionPadding:x,sticky:h,nodeId:p,keepMounted:C,disableAnchorTracking:m,collisionAvoidance:y,shiftCrossAxis:M,externalTree:N}),$=o.useMemo(()=>{const W={};return I||(W.pointerEvents="none"),{role:"presentation",hidden:!Z,style:{...F.positionerStyles,...W}}},[I,Z,F.positionerStyles]);o.useEffect(()=>{function W(q){q.open?(q.parentNodeId===p&&b.set("hoverEnabled",!1),q.nodeId!==p&&q.parentNodeId===b.select("floatingParentNodeId")&&b.setOpen(!1,J(Se))):q.parentNodeId===p&&q.reason!==Se&&b.set("hoverEnabled",!0)}return N.events.on("menuopenchange",W),()=>{N.events.off("menuopenchange",W)}},[b,N.events,p]),o.useEffect(()=>{if(b.select("floatingParentNodeId")==null)return;function W(q){if(q.open||q.nodeId!==b.select("floatingParentNodeId"))return;const xe=q.reason??Se;b.setOpen(!1,J(xe))}return N.events.on("menuopenchange",W),()=>{N.events.off("menuopenchange",W)}},[N.events,b]),o.useEffect(()=>{function W(q){!I||q.nodeId!==b.select("floatingParentNodeId")||q.target&&O&&O!==q.target&&b.setOpen(!1,J(Se))}return N.events.on("itemhover",W),()=>{N.events.off("itemhover",W)}},[N.events,I,O,b]),o.useEffect(()=>{const W={open:I,nodeId:p,parentNodeId:L,reason:b.select("lastOpenChangeReason")};N.events.emit("menuopenchange",W)},[N.events,I,b,p,L]);const Y=o.useMemo(()=>({open:I,side:F.side,align:F.align,anchorHidden:F.anchorHidden,nested:c.type==="menu"}),[I,F.side,F.align,F.anchorHidden,c.type]),A=o.useMemo(()=>({side:F.side,align:F.align,arrowRef:F.arrowRef,arrowUncentered:F.arrowUncentered,arrowStyles:F.arrowStyles,nodeId:F.context.nodeId}),[F.side,F.align,F.arrowRef,F.arrowUncentered,F.arrowStyles,F.context.nodeId]),B=ie("div",t,{state:Y,stateAttributesMapping:He,ref:[n,b.useStateSetter("positionerElement")],props:[$,R]}),z=Z&&c.type!=="menu"&&(c.type!=="menubar"&&k&&S!==ae||c.type==="menubar"&&c.context.modal);let G=null;return c.type==="menubar"?G=c.context.contentElement:c.type===void 0&&(G=O),i.jsxs(pn.Provider,{value:A,children:[z&&i.jsx(Xt,{ref:c.type==="context-menu"||c.type==="nested-context-menu"?c.context.internalBackdropRef:null,inert:qt(!I),cutout:G}),i.jsx(no,{id:p,children:i.jsx(oo,{elementsRef:b.context.itemDomElements,labelsRef:b.context.itemLabels,children:B})})]})}),tr=o.createContext(null);function xn(e){return o.useContext(tr)}const nr={...an,disabled:V(e=>e.parent.type==="menubar"&&e.parent.context.disabled||e.disabled),modal:V(e=>(e.parent.type===void 0||e.parent.type==="context-menu")&&(e.modal??!0)),allowMouseEnter:V(e=>e.parent.type==="menu"?e.parent.store.select("allowMouseEnter"):e.allowMouseEnter),stickIfOpen:V(e=>e.stickIfOpen),parent:V(e=>e.parent),rootId:V(e=>e.parent.type==="menu"?e.parent.store.select("rootId"):e.parent.type!==void 0?e.parent.context.rootId:e.rootId),activeIndex:V(e=>e.activeIndex),isActive:V((e,t)=>e.activeIndex===t),hoverEnabled:V(e=>e.hoverEnabled),instantType:V(e=>e.instantType),lastOpenChangeReason:V(e=>e.openChangeReason),floatingTreeRoot:V(e=>e.parent.type==="menu"?e.parent.store.select("floatingTreeRoot"):e.floatingTreeRoot),floatingNodeId:V(e=>e.floatingNodeId),floatingParentNodeId:V(e=>e.floatingParentNodeId),itemProps:V(e=>e.itemProps),closeDelay:V(e=>e.closeDelay),keyboardEventRelay:V(e=>{if(e.keyboardEventRelay)return e.keyboardEventRelay;if(e.parent.type==="menu")return e.parent.store.select("keyboardEventRelay")})};class rt extends Yt{constructor(n){super({...or(),...n},{positionerRef:o.createRef(),popupRef:o.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:o.createRef(),beforeContentFocusGuardRef:o.createRef(),onOpenChangeComplete:void 0,triggerElements:new tt},nr);_e(this,"unsubscribeParentListener",null);this.observe(V(r=>r.allowMouseEnter),(r,u)=>{this.state.parent.type==="menu"&&r!==u&&this.state.parent.store.set("allowMouseEnter",r)}),this.unsubscribeParentListener=this.observe("parent",r=>{var u;if((u=this.unsubscribeParentListener)==null||u.call(this),r.type==="menu"){this.unsubscribeParentListener=r.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=r.store.context.allowMouseUpTriggerRef;return}r.type!==void 0&&(this.context.allowMouseUpTriggerRef=r.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(n,r){this.state.floatingRootContext.context.events.emit("setOpen",{open:n,eventDetails:r})}static useStore(n,r){const u=Qe(()=>new rt(r)).current;return n??u}}function or(){return{...sn(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new Qt,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:me,keyboardEventRelay:void 0,closeDelay:0}}const rr=o.createContext(void 0);function sr(){return o.useContext(rr)}function ar(e){const{children:t,open:n,onOpenChange:r,onOpenChangeComplete:u,defaultOpen:a=!1,disabled:g=!1,modal:l,loopFocus:s=!0,orientation:E="vertical",actionsRef:v,closeParentOnEsc:d=!1,handle:x,triggerId:f,defaultTriggerId:h=null,highlightItemOnHover:m=!0}=e,T=Ve(!0),R=Re(!0),b=xn(),C=sr(),D=o.useMemo(()=>C&&R?{type:"menu",store:R.store}:b?{type:"menubar",context:b}:T&&!R?{type:"context-menu",context:T}:{type:void 0},[T,R,b,C]),c=rt.useStore(x==null?void 0:x.store,{parent:D}),K=c.useState("floatingTreeRoot"),N=en(K),Z=Pe();be(()=>{T&&!R?c.update({parent:{type:"context-menu",context:T},floatingNodeId:N,floatingParentNodeId:Z}):R&&c.update({floatingNodeId:N,floatingParentNodeId:Z})},[T,R,N,Z,c]),c.useControlledProp("open",n,a),c.useControlledProp("activeTriggerId",f,h),c.useContextCallback("onOpenChangeComplete",u);const I=c.useState("open"),k=c.useState("activeTriggerElement"),O=c.useState("positionerElement"),S=c.useState("hoverEnabled"),p=c.useState("modal"),L=c.useState("disabled"),H=c.useState("lastOpenChangeReason"),_=c.useState("parent"),Q=c.useState("activeIndex"),w=c.useState("payload"),y=c.useState("floatingParentNodeId"),P=o.useRef(null),j=y!=null;let M;c.useSyncedValues({disabled:g,modal:_.type===void 0?l:void 0,rootId:Je()});const{openMethod:F,triggerProps:$,reset:Y}=Zt(I);on(c);const{forceUnmount:A}=rn(I,c,()=>{c.update({allowMouseEnter:!1,stickIfOpen:!0}),Y()}),B=o.useRef(_.type!=="context-menu"),z=ve();o.useEffect(()=>{if(I||(P.current=null),_.type==="context-menu"){if(!I){z.clear(),B.current=!1;return}z.start(500,()=>{B.current=!0})}},[z,I,_.type]),$t(I&&p&&H!==ae&&F!=="touch",O),be(()=>{!I&&!S&&c.set("hoverEnabled",!0)},[I,S,c]);const G=o.useRef(!0),ee=ve(),W=oe((U,X)=>{const re=X.reason;if(I===U&&X.trigger===k&&H===re||(X.preventUnmountOnClose=()=>{c.set("preventUnmountingOnClose",!0)},!U&&X.trigger==null&&(X.trigger=k??void 0),r==null||r(U,X),X.isCanceled))return;const Sn={open:U,nativeEvent:X.event,reason:X.reason,nested:j};M==null||M.emit("openchange",Sn);const pe=X.event;if(U===!1&&(pe==null?void 0:pe.type)==="click"&&pe.pointerType==="touch"&&!G.current)return;if(!U&&Q!==null){const he=c.context.itemDomElements.current[Q];queueMicrotask(()=>{he==null||he.setAttribute("tabindex","-1")})}U&&re===Me?(G.current=!1,ee.start(300,()=>{G.current=!0})):(G.current=!0,ee.clear());const dt=(re===At||re===Lt)&&pe.detail===0&&(pe==null?void 0:pe.isTrusted),Mn=!U&&(re===Dt||re==null);function ft(){var gt;const he={open:U,openChangeReason:re};P.current=X.event??null;const pt=((gt=X.trigger)==null?void 0:gt.id)??null;(pt||U)&&(he.activeTriggerId=pt,he.activeTriggerElement=X.trigger??null),c.update(he)}re===ae?Ne.flushSync(ft):ft(),_.type==="menubar"&&(re===Me||re===We||re===ae||re===Fn||re===Se)?c.set("instantType","group"):dt||Mn?c.set("instantType",dt?"click":"dismiss"):c.set("instantType",void 0)}),q=o.useCallback(U=>{const X=J(U);return X.preventUnmountOnClose=()=>{c.set("preventUnmountingOnClose",!0)},X},[c]),xe=o.useCallback(()=>{c.setOpen(!1,q(Ht))},[c,q]);o.useImperativeHandle(v,()=>({unmount:A,close:xe}),[A,xe]);let ue;_.type==="context-menu"&&(ue=_.context),o.useImperativeHandle(ue==null?void 0:ue.positionerRef,()=>O,[O]),o.useImperativeHandle(ue==null?void 0:ue.actionsRef,()=>({setOpen:W}),[W]);const fe=ln({popupStore:c,onOpenChange:W});M=fe.context.events,o.useEffect(()=>{const U=({open:X,eventDetails:re})=>W(X,re);return M.on("setOpen",U),()=>{M==null||M.off("setOpen",U)}},[M,W]);const Ie=Ut(fe,{enabled:!L,bubbles:{escapeKey:d&&_.type==="menu"},outsidePress(){var U;return _.type!=="context-menu"||((U=P.current)==null?void 0:U.type)==="contextmenu"?!0:B.current},externalTree:j?K:void 0}),te=un(fe,{role:"menu"}),ne=ro(),de=o.useCallback(U=>{c.select("activeIndex")!==U&&c.set("activeIndex",U)},[c]),le=so(fe,{enabled:!L,listRef:c.context.itemDomElements,activeIndex:Q,nested:_.type!==void 0,loopFocus:s,orientation:E,parentOrientation:_.type==="menubar"?_.context.orientation:void 0,rtl:ne==="rtl",disabledIndices:ze,onNavigate:de,openOnArrowKeyDown:_.type!=="context-menu",externalTree:j?K:void 0,focusItemOnHover:m}),Le=o.useCallback(U=>{c.context.typingRef.current=U},[c]),yn=ao(fe,{listRef:c.context.itemLabels,activeIndex:Q,resetMs:lo,onMatch:U=>{I&&U!==Q&&c.set("activeIndex",U)},onTypingChange:Le}),{getReferenceProps:st,getFloatingProps:at,getItemProps:it,getTriggerProps:lt}=ot([Ie,te,le,yn]),vn=o.useMemo(()=>{const U=Ye(st(),{onMouseEnter(){c.set("hoverEnabled",!0)},onMouseMove(){c.set("allowMouseEnter",!0)}},$);return delete U.role,U},[st,c,$]),En=o.useMemo(()=>{const U=lt();if(!U)return U;const X=Ye(U,$);return delete X.role,delete X["aria-controls"],X},[lt,$]),ct=jn(),Rn=o.useMemo(()=>at({onMouseEnter(){_.type==="menu"&&ct.request(()=>c.set("hoverEnabled",!1))},onMouseMove(){c.set("allowMouseEnter",!0)},onClick(){c.select("hoverEnabled")&&c.set("hoverEnabled",!1)},onKeyDown(U){const X=c.select("keyboardEventRelay");X&&!U.isPropagationStopped()&&X(U)}}),[at,_.type,ct,c]),Cn=o.useMemo(()=>it(),[it]);c.useSyncedValues({floatingRootContext:fe,activeTriggerProps:vn,inactiveTriggerProps:En,popupProps:Rn,itemProps:Cn});const Tn=o.useMemo(()=>({store:c,parent:D}),[c,D]),ut=i.jsx(mn.Provider,{value:Tn,children:typeof t=="function"?t({payload:w}):t});return _.type===void 0||_.type==="context-menu"?i.jsx(io,{externalTree:K,children:ut}):ut}function ir(e={}){const{highlightItemOnHover:t,highlightedIndex:n,onHighlightedIndexChange:r}=_t(),{ref:u,index:a}=Jt(e),g=n===a,l=o.useRef(null),s=Vt(u,l);return{compositeProps:o.useMemo(()=>({tabIndex:g?0:-1,onFocus(){r(a)},onMouseMove(){const v=l.current;if(!t||!v)return;const d=v.hasAttribute("disabled")||v.ariaDisabled==="true";!g&&!d&&v.focus()}}),[g,r,a,t]),compositeRef:s,index:a}}function lr(e){const{render:t,className:n,state:r=me,props:u=ze,refs:a=ze,metadata:g,stateAttributesMapping:l,tag:s="div",...E}=e,{compositeProps:v,compositeRef:d}=ir({metadata:g});return ie(s,e,{state:r,ref:[...a,d],props:[v,...u,E],stateAttributesMapping:l})}function hn(e){if(Ft(e)&&e.hasAttribute("data-rootownerid"))return e.getAttribute("data-rootownerid")??void 0;if(!An(e))return hn(Dn(e))}function cr(e){const{enabled:t=!0,mouseDownAction:n,open:r}=e,u=o.useRef(!1);return o.useMemo(()=>t?{onMouseDown:a=>{(n==="open"&&!r||n==="close"&&r)&&(u.current=!0,Ge(a.currentTarget).addEventListener("click",()=>{u.current=!1},{once:!0}))},onClick:a=>{u.current&&(u.current=!1,a.preventBaseUIHandler())}}:me,[t,n,r])}const Oe=2,ur=o.forwardRef(function(t,n){const{render:r,className:u,disabled:a=!1,nativeButton:g=!0,id:l,openOnHover:s,delay:E=100,closeDelay:v=0,handle:d,payload:x,...f}=t,h=Re(!0),m=(d==null?void 0:d.store)??(h==null?void 0:h.store);if(!m)throw new Error(Te(85));const T=Ae(l),R=m.useState("isTriggerActive",T),b=m.useState("floatingRootContext"),C=m.useState("isOpenedByTrigger",T),D=o.useRef(null),c=fr(),K=_t(!0),N=nt(),Z=o.useMemo(()=>N??new Qt,[N]),I=en(Z),k=Pe(),{registerTrigger:O,isMountedByThisTrigger:S}=To(T,D,m,{payload:x,closeDelay:v,parent:c,floatingTreeRoot:Z,floatingNodeId:I,floatingParentNodeId:k,keyboardEventRelay:K==null?void 0:K.relayKeyboardEvent}),p=c.type==="menubar",L=m.useState("disabled"),H=a||L||p&&c.context.disabled,{getButtonProps:_,buttonRef:Q}=Fe({disabled:H,native:g});o.useEffect(()=>{!C&&c.type===void 0&&(m.context.allowMouseUpTriggerRef.current=!1)},[m,C,c.type]);const w=o.useRef(null),y=ve(),P=oe(te=>{if(!w.current)return;y.clear(),m.context.allowMouseUpTriggerRef.current=!1;const ne=te.target;if(se(w.current,ne)||se(m.select("positionerElement"),ne)||ne===w.current||ne!=null&&hn(ne)===m.select("rootId"))return;const de=uo(w.current);te.clientX>=de.left-Oe&&te.clientX<=de.right+Oe&&te.clientY>=de.top-Oe&&te.clientY<=de.bottom+Oe||Z.events.emit("close",{domEvent:te,reason:Hn})});o.useEffect(()=>{C&&m.select("lastOpenChangeReason")===ae&&Ge(w.current).addEventListener("mouseup",P,{once:!0})},[C,P,m]);const j=p&&c.context.hasSubmenuOpen,F=jo(b,{enabled:(s??j)&&!H&&c.type!=="context-menu"&&(!p||j&&!S),handleClose:Do({blockPointerEvents:!p}),mouseOnly:!0,move:!1,restMs:c.type===void 0?E:void 0,delay:{close:v},triggerElementRef:D,externalTree:Z,isActiveTrigger:R}),$=dr(C,m.select("lastOpenChangeReason")),Y=co(b,{enabled:!H&&c.type!=="context-menu",event:C&&p?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:c.type===void 0?$:!1}),A=Mo(b,{enabled:!H&&j}),B=cr({open:C,enabled:p,mouseDownAction:"open"}),z=ot([Y,A]),G=o.useMemo(()=>({disabled:H,open:C}),[H,C]),ee=m.useState("triggerProps",S),W=[w,n,Q,O,D],q=[z.getReferenceProps(),F??me,ee,{"aria-haspopup":"menu",id:T,onMouseDown:te=>{if(m.select("open"))return;y.start(200,()=>{m.context.allowMouseUpTriggerRef.current=!0}),Ge(te.currentTarget).addEventListener("mouseup",P,{once:!0})}},p?{role:"menuitem"}:{},B,f,_],xe=o.useRef(null),ue=oe(te=>{Ne.flushSync(()=>{m.setOpen(!1,J(We,te.nativeEvent,te.currentTarget))});const ne=po(xe.current);ne==null||ne.focus()}),fe=oe(te=>{var de;const ne=m.select("positionerElement");if(ne&&go(te,ne))(de=m.context.beforeContentFocusGuardRef.current)==null||de.focus();else{Ne.flushSync(()=>{m.setOpen(!1,J(We,te.nativeEvent,te.currentTarget))});let le=mo(m.context.triggerFocusTargetRef.current||D.current);for(;le!==null&&se(ne,le);){const Le=le;if(le=bo(le),le===Le)break}le==null||le.focus()}}),Ie=ie("button",t,{enabled:!p,stateAttributesMapping:ht,state:G,ref:W,props:q});return p?i.jsx(lr,{tag:"button",render:r,className:u,state:G,refs:W,props:q,stateAttributesMapping:ht}):C?i.jsxs(o.Fragment,{children:[i.jsx(yt,{ref:xe,onFocus:ue},`${T}-pre-focus-guard`),i.jsx(o.Fragment,{children:Ie},T),i.jsx(yt,{ref:m.context.triggerFocusTargetRef,onFocus:fe},`${T}-post-focus-guard`)]}):i.jsx(o.Fragment,{children:Ie},T)});function dr(e,t){const n=ve(),[r,u]=o.useState(!1);return be(()=>{e&&t==="trigger-hover"?(u(!0),n.start(fo,()=>{u(!1)})):e||(n.clear(),u(!1))},[e,t,n]),r}function fr(){const e=Ve(!0),t=Re(!0),n=xn();return o.useMemo(()=>n?{type:"menubar",context:n}:e&&!t?{type:"context-menu",context:e}:{type:void 0},[e,t,n])}const pr=o.forwardRef(function(t,n){const{className:r,render:u,orientation:a="horizontal",...g}=t,l=o.useMemo(()=>({orientation:a}),[a]);return ie("div",t,{state:l,ref:n,props:[{role:"separator","aria-orientation":a},g]})});function kt({text:e}){const[t,n]=o.useState(!1),r=async()=>{await navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),1500)};return i.jsx(ce,{className:ye("flex items-center justify-center w-6 h-6 p-0 border-none rounded bg-transparent text-text-secondary cursor-pointer opacity-0 transition-[opacity,background-color,color] shrink-0 hover:bg-border hover:text-text group-hover/cell:opacity-100",{"opacity-100 text-success":t}),onClick:r,"aria-label":t?"Copied":"Copy to clipboard",children:t?i.jsx(xo,{size:14,weight:"bold"}):i.jsx(tn,{size:14})})}function gr(e,t=100){return e===""?"(empty)":e===null?JSON.stringify(e):e.length>t?e.slice(0,t)+"...":e}function mr({onEdit:e,onDelete:t}){return i.jsxs(ar,{children:[i.jsx(ur,{className:"flex items-center justify-center w-7 h-7 border-none rounded-md bg-transparent text-text-secondary cursor-pointer transition-[background-color,color] hover:bg-border hover:text-text","aria-label":"Actions",children:i.jsx(nn,{size:16,weight:"bold"})}),i.jsx(Qo,{children:i.jsx(er,{sideOffset:4,align:"end",children:i.jsxs(qo,{className:"min-w-24 bg-bg border border-border rounded-lg shadow-[0_4px_12px_rgba(0,0,0,0.15)] z-[100] overflow-hidden transition-[opacity,transform] duration-150 data-[starting-style]:opacity-0 data-[starting-style]:-translate-y-1 data-[ending-style]:opacity-0 data-[ending-style]:-translate-y-1",children:[i.jsxs(It,{className:"inline-flex items-center gap-1 w-full py-2 px-3 border-none bg-transparent text-left text-sm text-text cursor-pointer transition-colors hover:bg-bg-secondary dark:hover:bg-bg-tertiary data-[highlighted]:bg-bg-secondary dark:data-[highlighted]:bg-bg-tertiary",onClick:e,children:[i.jsx(ho,{}),i.jsx("span",{children:"Edit"})]}),i.jsx(pr,{className:"h-px bg-border"}),i.jsxs(It,{className:"inline-flex items-center gap-1 w-full py-2 px-3 border-none bg-transparent text-left text-sm text-danger cursor-pointer transition-colors hover:bg-danger/8 data-[highlighted]:bg-danger/8",onClick:t,children:[i.jsx(yo,{}),i.jsx("span",{children:"Delete"})]})]})})})]})}function br({entries:e,onSave:t,onDelete:n}){const[r,u]=o.useState(null),[a,g]=o.useState(!1),l=f=>{u({originalKey:f.key.name,key:f.key.name,value:f.value??"",keyError:null})},s=f=>{r&&u({...r,key:f,keyError:f.trim()?Ce(f):null})},E=async()=>{if(!r)return;const f=Ce(r.key);if(f){u({...r,keyError:f});return}try{g(!0),await t(r.originalKey,r.key,r.value)&&u(null)}finally{g(!1)}},v=()=>{u(null)},d=f=>{f.key==="Escape"?v():f.key==="Enter"&&(f.metaKey||f.ctrlKey)&&E()},x=r?!!Ce(r.key):!1;return i.jsxs("table",{className:"w-full border-separate border-spacing-0 bg-bg border border-border rounded-lg",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-2.5 px-3 text-left bg-bg font-semibold text-xs uppercase tracking-wide text-text-secondary border-b border-border first:rounded-tl-[7px]",children:"Key"}),i.jsx("th",{className:"py-2.5 px-3 text-left bg-bg font-semibold text-xs uppercase tracking-wide text-text-secondary border-b border-border",children:"Value"}),i.jsx("th",{className:"py-2.5 px-3 text-left bg-bg font-semibold text-xs uppercase tracking-wide text-text-secondary border-b border-border w-12 last:rounded-tr-[7px]"})]})}),i.jsx("tbody",{children:e.map((f,h)=>{const m=(r==null?void 0:r.originalKey)===f.key.name,T=h===e.length-1;return i.jsxs("tr",{className:"group hover:bg-bg-tertiary",children:[i.jsx("td",{className:ye("py-2 px-3 text-left align-top group/cell",T?"border-b-0 first:rounded-bl-[7px]":"border-b border-border"),children:m&&r?i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"sr-only",htmlFor:`edit-key-${f.key.name}`,children:"Key"}),i.jsx("input",{id:`edit-key-${f.key.name}`,className:ye("w-full font-mono bg-bg text-text min-h-8 py-1.5 px-2 text-[13px] border border-primary rounded focus:outline-none focus:shadow-focus-primary disabled:bg-bg-secondary disabled:text-text-secondary",{"border-danger focus:shadow-focus-danger":r.keyError}),value:r.key,onChange:R=>s(R.target.value),onKeyDown:d,disabled:a,autoFocus:!0}),r.keyError&&i.jsx("span",{className:"text-danger text-xs mt-1",children:r.keyError})]}):i.jsxs("div",{className:"group/cell flex items-center gap-1.5",children:[i.jsx("code",{className:"text-primary font-medium",children:f.key.name}),i.jsx(kt,{text:f.key.name})]})}),i.jsx("td",{className:ye("py-2 px-3 text-left max-w-[400px] font-mono text-[13px] group/cell",T?"border-b-0":"border-b border-border"),children:m&&r?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("label",{className:"sr-only",htmlFor:`edit-value-${f.key.name}`,children:"Value"}),i.jsx("textarea",{id:`edit-value-${f.key.name}`,className:"w-full font-mono bg-bg text-text min-h-8 py-1.5 px-2 text-[13px] border border-primary rounded focus:outline-none focus:shadow-focus-primary disabled:bg-bg-secondary disabled:text-text-secondary max-h-[200px] resize-none overflow-y-auto [field-sizing:content]",value:r.value,onChange:R=>u({...r,value:R.target.value}),onKeyDown:d,disabled:a}),i.jsxs("div",{className:"flex justify-end gap-1.5",children:[i.jsx(ce,{className:"inline-flex items-center justify-center py-1 px-2.5 text-xs font-medium border-none rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-bg-tertiary text-text border border-border hover:bg-border data-[disabled]:opacity-60 data-[disabled]:cursor-not-allowed data-[disabled]:active:translate-y-0",onClick:v,disabled:a,children:"Cancel"}),i.jsx(ce,{className:"inline-flex items-center justify-center py-1 px-2.5 text-xs font-medium border-none rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-primary text-white hover:bg-primary-hover data-[disabled]:text-white/70 data-[disabled]:cursor-not-allowed data-[disabled]:active:translate-y-0",onClick:E,disabled:a||x,focusableWhenDisabled:!0,children:a?"Saving...":"Save"})]})]}):i.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[i.jsx("span",{className:ye("overflow-hidden text-ellipsis whitespace-nowrap min-w-0",{"text-text-secondary":!f.value}),children:gr(f.value)}),f.value&&i.jsx(kt,{text:f.value})]})}),i.jsx("td",{className:ye("py-2 px-3 whitespace-nowrap text-right",T?"border-b-0 last:rounded-br-[7px]":"border-b border-border"),children:!m&&i.jsx(mr,{onEdit:()=>l(f),onDelete:()=>void n(f.key.name)})})]},f.key.name)})})]})}function xr({onSearch:e,disabled:t=!1}){const[n,r]=o.useState(""),u=a=>{a.preventDefault(),e(n)};return i.jsxs("form",{className:"flex gap-2 items-center",onSubmit:u,children:[i.jsx("label",{className:"sr-only",htmlFor:"search-prefix",children:"Search keys by prefix"}),i.jsx("input",{id:"search-prefix",className:"flex-1 max-w-[400px] font-mono bg-bg text-text py-2 px-3 text-sm border border-border rounded-md focus:outline-none focus:border-primary focus:shadow-[0_0_0_3px_rgba(255,72,1,0.15)] disabled:bg-bg-secondary disabled:text-text-secondary",placeholder:"Search keys by prefix...",value:n,onChange:a=>r(a.target.value),disabled:t}),i.jsx(ce,{type:"submit",className:"btn shrink-0 inline-flex items-center justify-center py-2 px-4 text-sm font-medium rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-bg-tertiary text-text border border-border hover:bg-border",disabled:t,focusableWhenDisabled:!0,children:"Search"})]})}const $e=(e,t)=>e.filter(n=>n.key.name!==t),hr=(e,t,n)=>e.map(r=>r.key.name===t?{key:{name:t},value:n}:r),Ot=(e,t)=>[t,...e],Nt=(e,t)=>e.some(n=>n.key.name===t);function Rr(){const{namespaceId:e}=Vn.useParams(),[t,n]=o.useState([]),[r,u]=o.useState(!0),[a,g]=o.useState(null),[l,s]=o.useState(null),[E,v]=o.useState(!1),[d,x]=o.useState(!1),[f,h]=o.useState(null),[m,T]=o.useState(!1),[R,b]=o.useState(null),[C,D]=o.useState(!1),[c,K]=o.useState(0),[N,Z]=o.useState(void 0),I=o.useCallback(async(y,P)=>{var j,M,F,$,Y;try{y?x(!0):(u(!0),n([])),g(null);const A=await Ln({path:{namespace_id:e},query:{cursor:y,limit:50,prefix:P}}),B=((j=A.data)==null?void 0:j.result)??[];let z={};B.length>0&&(z=((F=(M=(await _n({path:{namespace_id:e},body:{keys:B.map(q=>q.name)}})).data)==null?void 0:M.result)==null?void 0:F.values)??{});const G=B.map(W=>({key:W,value:z[W.name]??null}));n(y?W=>[...W,...G]:G);const ee=(Y=($=A.data)==null?void 0:$.result_info)==null?void 0:Y.cursor;s(ee??null),v(!!ee)}catch(A){g(A instanceof Error?A.message:"Failed to fetch entries")}finally{u(!1),x(!1)}},[e]);o.useEffect(()=>{h(null),b(null),g(null),Z(void 0),I(void 0,void 0)},[e,I]);const k=()=>{l&&!d&&I(l,N)},O=y=>{const P=y||void 0;Z(P),I(void 0,P)},S=async y=>{try{return(await Kn({path:{namespace_id:e,key_name:y}})).response.ok}catch{return!1}},p=async(y,P)=>{try{return await S(y)?(b({key:y,value:P}),!1):(await L(y,P),!0)}catch(j){return g(j instanceof Error?j.message:"Failed to add entry"),!1}},L=async(y,P,j=!1)=>{await bt({path:{namespace_id:e,key_name:y},body:P});const M={key:{name:y},value:P};n(F=>{const $=Nt(F,y),Y=$e(F,y);return $||!j?Ot(Y,M):Y})},H=async(y,P,j)=>{try{return y!==P&&await S(P)?(b({key:P,value:j,originalKey:y}),!1):(await _(y,P,j),!0)}catch(M){return g(M instanceof Error?M.message:"Failed to save entry"),!1}},_=async(y,P,j,M=!1)=>{await bt({path:{namespace_id:e,key_name:P},body:j}),y!==P&&await mt({path:{namespace_id:e,key_name:y},body:null});const F={key:{name:P},value:j};n($=>{const Y=y!==P?$e($,y):$;return Nt(Y,P)?hr(Y,P,j):M?Y:Ot(Y,F)})},Q=async()=>{if(!R)return;const{key:y,value:P,originalKey:j}=R;try{D(!0),j?await _(j,y,P,!0):(await L(y,P,!0),K(M=>M+1)),b(null)}catch(M){g(M instanceof Error?M.message:"Failed to overwrite")}finally{D(!1)}},w=async()=>{if(f)try{T(!0),await mt({path:{namespace_id:e,key_name:f},body:null}),n(y=>$e(y,f)),h(null)}catch(y){g(y instanceof Error?y.message:"Failed to delete"),h(null)}finally{T(!1)}};return i.jsxs(i.Fragment,{children:[i.jsx(vo,{icon:Bn,title:"KV",items:[i.jsx("span",{className:"flex items-center gap-1.5",children:e},"namespace-id")]}),i.jsxs("div",{className:"px-6 py-6",children:[a&&i.jsx("div",{className:"text-danger p-4 bg-danger/8 border border-danger/20 rounded-md mb-4",children:a}),i.jsx(xr,{onSearch:O,disabled:r},e),i.jsx("hr",{className:"border-border my-4"}),i.jsx(Yo,{onAdd:p,clearSignal:c}),r?i.jsx("div",{className:"text-center p-12 text-text-secondary",children:"Loading..."}):t.length===0?i.jsx("div",{className:"text-center p-12 text-text-secondary space-y-2 flex flex-col items-center justify-center",children:N?i.jsx("p",{className:"text-sm font-light",children:`No keys found matching prefix "${N}".`}):i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-2xl font-medium",children:"No keys in this namespace"}),i.jsx("p",{className:"text-sm font-light",children:"Add an entry using the form above."})]})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"rounded-lg",children:i.jsx(br,{entries:t,onSave:H,onDelete:y=>h(y)})}),E&&i.jsx("div",{className:"text-center p-4",children:i.jsx(ce,{className:"inline-flex items-center justify-center py-2 px-4 text-sm font-medium rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-bg-tertiary text-text border border-border hover:bg-border data-disabled:opacity-60 data-disabled:cursor-not-allowed data-disabled:active:translate-y-0",onClick:k,disabled:d,focusableWhenDisabled:!0,children:d?"Loading...":"Load More"})})]}),i.jsx(Et,{open:f!==null,onOpenChange:y=>!y&&h(null),children:i.jsxs(Mt,{children:[i.jsx(Rt,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-1000 transition-opacity duration-150 data-starting-style:opacity-0 data-ending-style:opacity-0"}),i.jsxs(St,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-1001 bg-bg rounded-xl p-6 w-full max-w-125 shadow-[0_4px_24px_rgba(0,0,0,0.15),0_0_0_1px_var(--color-border)] transition-[opacity,transform] duration-150 data-starting-style:opacity-0 data-starting-style:scale-95 data-ending-style:opacity-0 data-ending-style:scale-95",children:[i.jsx(wt,{className:"text-lg font-semibold mb-4",children:"Delete key?"}),i.jsxs(Tt,{className:"text-text-secondary mb-2",children:["Are you sure you want to delete ",f,"? This cannot be undone."]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(Ct,{render:i.jsx(ce,{className:"inline-flex items-center justify-center py-2 px-4 text-sm font-medium border-none rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-bg-tertiary text-text border border-border hover:bg-border data-disabled:opacity-60 data-disabled:cursor-not-allowed data-disabled:active:translate-y-0"}),disabled:m,children:"Cancel"}),i.jsx(ce,{className:"inline-flex items-center justify-center py-2 px-4 text-sm font-medium border-none rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-danger text-bg-tertiary hover:bg-danger-hover data-disabled:opacity-60 data-disabled:cursor-not-allowed data-disabled:active:translate-y-0",onClick:w,disabled:m,focusableWhenDisabled:!0,children:m?"Deleting...":"Delete"})]})]})]})}),i.jsx(Et,{open:R!==null,onOpenChange:y=>!y&&b(null),children:i.jsxs(Mt,{children:[i.jsx(Rt,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-1000 transition-opacity duration-150 data-starting-style:opacity-0 data-ending-style:opacity-0"}),i.jsxs(St,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-1001 bg-bg rounded-xl p-6 w-full max-w-125 shadow-[0_4px_24px_rgba(0,0,0,0.15),0_0_0_1px_var(--color-border)] transition-[opacity,transform] duration-150 data-starting-style:opacity-0 data-starting-style:scale-95 data-ending-style:opacity-0 data-ending-style:scale-95",children:[i.jsx(wt,{className:"text-lg font-semibold mb-4",children:"Overwrite key?"}),i.jsxs(Tt,{className:"text-text-secondary mb-2",children:["Key ",R==null?void 0:R.key," already exists. Do you want to overwrite its value?"]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(Ct,{render:i.jsx(ce,{className:"inline-flex items-center justify-center py-2 px-4 text-sm font-medium border-none rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-bg-tertiary text-text border border-border hover:bg-border data-disabled:opacity-60 data-disabled:cursor-not-allowed data-disabled:active:translate-y-0"}),disabled:C,children:"Cancel"}),i.jsx(ce,{className:"inline-flex items-center justify-center py-2 px-4 text-sm font-medium border-none rounded-md cursor-pointer transition-[background-color,transform] active:translate-y-px bg-primary text-bg-tertiary hover:bg-primary-hover data-disabled:opacity-60 data-disabled:cursor-not-allowed data-disabled:active:translate-y-0",onClick:Q,disabled:C,focusableWhenDisabled:!0,children:C?"Overwriting...":"Overwrite"})]})]})]})})]})]})}export{Rr as component};
